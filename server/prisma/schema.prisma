// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            String       @id @default(cuid())
  email         String       @unique
  firstName     String
  middleName    String?
  lastName      String
  password      String
  role          UserRole
  studentData   StudentData? @relation(fields: [studentDataId], references: [id])
  adminData     AdminData?   @relation(fields: [adminDataId], references: [id])
  curatorData   CuratorData? @relation(fields: [curatorDataId], references: [id])
  studentDataId Int?
  adminDataId   Int?
  curatorDataId Int?
}

enum UserRole {
  STUDENT
  ADMIN
  CURATOR
}

model StudentData {
  id             Int     @id @default(autoincrement())
  userId         Int     @unique
  avatarUrl      String? @map("avatar_url")
  additionalInfo String?
  User           User[]
}

model AdminData {
  id     Int    @id @default(autoincrement())
  userId Int    @unique
  User   User[]
}

model CuratorData {
  id     Int    @id @default(autoincrement())
  userId Int    @unique
  User   User[]
}

enum FluoroStatus {
  PENDING
  ACCEPTED
  REJECTED
}

model Fluorography {
  id        Int          @id @default(autoincrement())
  studentId Int
  date      DateTime
  status    FluoroStatus
  file_url  String       @map("file_url")
}
